<?xml version="1.0" encoding="utf-8" ?>
<local:CreateWorkoutPageXaml xmlns="http://xamarin.com/schemas/2014/forms"
                             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                             x:Class="SV.Builder.Mobile.Views.Pages.CreateWorkoutPage"
                             xmlns:local="clr-namespace:SV.Builder.Mobile.Views.Pages"
                             xmlns:partials="clr-namespace:SV.Builder.Mobile.Views.Partial"
                             x:Name="createWorkoutPage"
                             >
    <Grid RowSpacing="0">

        <Grid.RowDefinitions>
            <RowDefinition Height="52"></RowDefinition>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        
        <partials:FormTitleBar></partials:FormTitleBar>

        <StackLayout Grid.Row="1"
                     Spacing="0"
                     >
            <ScrollView>
                <StackLayout x:Name="mainContentStack"
                             BackgroundColor="LightGray"
                             Spacing="0"
                             >
                    <StackLayout Padding="15">
                        <Label Text="{Binding Name}"
                               FontSize="Large"
                               FontAttributes="Bold"
                               >
                        </Label>

                        <Label Text="{Binding Description}"
                               FontSize="Default"
                               ></Label>

                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="WorkoutNameTapGestureRecognizer_Tapped"></TapGestureRecognizer>
                        </StackLayout.GestureRecognizers>
                    </StackLayout>

                    <BoxView HeightRequest="1"
                             Color="LightGray"
                             Margin="15,0,0,0"
                             >

                    </BoxView>

                    <StackLayout x:Name="workoutDetailsStack"
                                 Padding="15">

                        <StackLayout Orientation="Horizontal"
                                     Spacing="50"
                                     >
                            <StackLayout>
                                <Label Text="25:00"
                                       HorizontalTextAlignment="Center"
                                       ></Label>
                                <Label Text="Est. Duration"
                                       HorizontalTextAlignment="Center"
                                       ></Label>
                            </StackLayout>

                            <StackLayout>
                                <Label Text="1"
                                       HorizontalTextAlignment="Center"
                                       ></Label>
                                <Label Text="Round(s)"
                                       HorizontalTextAlignment="Center"
                                       ></Label>

                            </StackLayout>
                        </StackLayout>

                    </StackLayout>

                    <BoxView HeightRequest="1"
                             Color="LightGray"
                             Margin="15,0,0,0"
                             ></BoxView>

                    <CollectionView ItemsSource="{Binding Rounds}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <StackLayout Padding="15">

                                    <StackLayout x:Name="roundHeader"
                                                 Orientation="Horizontal"
                                                 >
                                        <Label Text="{Binding Name}"
                                               FontSize="Medium"
                                               FontAttributes="Bold"
                                               ></Label>

                                        <Label Text="x1"
                                               HorizontalOptions="CenterAndExpand"
                                               VerticalTextAlignment="End"
                                               ></Label>


                                        <Label Text="25:00mins"
                                               VerticalTextAlignment="End"
                                               ></Label>
                                    </StackLayout>
                                    <!--/round header-->
                                    <StackLayout x:Name="exercisesStackPanel"
                                                 Padding="15"
                                                 Spacing="10"
                                                 >

                                        <StackLayout x:Name="exercise">

                                            <StackLayout x:Name="exerciseHeader"
                                                         Orientation="Horizontal"
                                                         >
                                                <Label Text="Exercise 1"
                                                       FontSize="Default"
                                                       FontAttributes="Bold"
                                                   ></Label>

                                                <Label Text="x1"
                                                   HorizontalOptions="CenterAndExpand"
                                                   VerticalTextAlignment="End"
                                                   ></Label>


                                                <Label Text="05:00mins"
                                                   VerticalTextAlignment="End"
                                                   ></Label>
                                            </StackLayout>
                                        </StackLayout>

                                        <StackLayout x:Name="exercise2">

                                            <StackLayout x:Name="exerciseHeader2"
                                                         Orientation="Horizontal"
                                                         >
                                                <Label Text="Exercise 2"
                                                       FontSize="Default"
                                                       FontAttributes="Bold"
                                                   ></Label>

                                                <Label Text="x3"
                                                   HorizontalOptions="CenterAndExpand"
                                                   VerticalTextAlignment="End"
                                                   ></Label>


                                                <Label Text="15:00mins"
                                                   VerticalTextAlignment="End"
                                                   ></Label>
                                            </StackLayout>
                                        </StackLayout>

                                    </StackLayout>
                                    <BoxView HeightRequest="1"
                                            Color="Gray"
                                            ></BoxView>

                                    <Button Text="Add Exercise"
                                            HorizontalOptions="Start"
                                            Command="{Binding AddExerciseToRoundCommand}"
                                            CommandParameter="{Binding .}"
                                            ></Button>


                                </StackLayout>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                </StackLayout>

            </ScrollView>

            <Button Text="Add Round"
                    x:Name="addRoundButton"
                    VerticalOptions="EndAndExpand"
                    Clicked="addRoundButton_Clicked"
                    ></Button>
            
        </StackLayout>

    </Grid>
</local:CreateWorkoutPageXaml>